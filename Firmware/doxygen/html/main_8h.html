<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Power Unit Cooler Controller: main.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Power Unit Cooler Controller
   </div>
   <div id="projectbrief">Firmware for power unit cooler controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('main_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="hal_8h_source.html">hal.h</a>&quot;</code><br />
<code>#include &lt;avr/eeprom.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.h:</div>
<div class="dyncontent">
<div class="center"><img src="main_8h__incl.png" border="0" usemap="#main_8h" alt=""/></div>
<map name="main_8h" id="main_8h">
<area shape="rect" id="node2" href="hal_8h.html" title="hal.h" alt="" coords="163,80,214,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="main_8h__dep__incl.png" border="0" usemap="#main_8hdep" alt=""/></div>
<map name="main_8hdep" id="main_8hdep">
<area shape="rect" id="node2" href="hal_8c.html" title="hal.c" alt="" coords="5,80,56,107"/>
<area shape="rect" id="node3" href="main_8c.html" title="main.c" alt="" coords="80,80,141,107"/>
</map>
</div>
</div>
<p><a href="main_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abd8fdf4407be5b2163aa5e80ac6b52b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#abd8fdf4407be5b2163aa5e80ac6b52b3">MN_WAIT_FOR_COOLER_STOP</a>&#160;&#160;&#160;0x01U</td></tr>
<tr class="separator:abd8fdf4407be5b2163aa5e80ac6b52b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0493cec9fe22a39f1890436658273b9b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a0493cec9fe22a39f1890436658273b9b">MN_F0_DISABLE_RPM_LOOP</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a0493cec9fe22a39f1890436658273b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6898ca87304508f7715049e8a4db7c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#aa6898ca87304508f7715049e8a4db7c1">MN_COOLER_SPIN_UP_DUTY_CYCLE_STEP</a>&#160;&#160;&#160;0x01U</td></tr>
<tr class="separator:aa6898ca87304508f7715049e8a4db7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a776ccf3d27a8983037d7397dc6b2e6ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a776ccf3d27a8983037d7397dc6b2e6ed">MN_COOLER_SPIN_UP_MINIMAL_RPM</a>&#160;&#160;&#160;0x04U</td></tr>
<tr class="separator:a776ccf3d27a8983037d7397dc6b2e6ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4b448ea3fccf1c0972090aad4eec9d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#ae4b448ea3fccf1c0972090aad4eec9d6">MN_COOLER_SPIN_UP_WAIT</a>&#160;&#160;&#160;0x05U</td></tr>
<tr class="separator:ae4b448ea3fccf1c0972090aad4eec9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f969a8879a8021d093ae5080e05706d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a9f969a8879a8021d093ae5080e05706d">MN_WAIT_BEFORE_RPM_LOOP</a>&#160;&#160;&#160;0x03U</td></tr>
<tr class="separator:a9f969a8879a8021d093ae5080e05706d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6fe5a3a19489ab50584d25600cb2649"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#ac6fe5a3a19489ab50584d25600cb2649">MN_LOOKUP_ABL_ADDRESS</a>&#160;&#160;&#160;0x00U</td></tr>
<tr class="separator:ac6fe5a3a19489ab50584d25600cb2649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060c81eea0c2703263be5a47c2b73def"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a060c81eea0c2703263be5a47c2b73def">MN_LOOKUP_BRPM_ADDRESS</a>&#160;&#160;&#160;0x02U</td></tr>
<tr class="separator:a060c81eea0c2703263be5a47c2b73def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc70b15633e4e6144632c15a6b7164a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#adc70b15633e4e6144632c15a6b7164a0">MN_LOOKUP_FIRST_VALUE_ADDRESS</a>&#160;&#160;&#160;0x03U</td></tr>
<tr class="separator:adc70b15633e4e6144632c15a6b7164a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032481fba4557e17310bf5a7d3a786db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a032481fba4557e17310bf5a7d3a786db">MN_BRPM_INCREMENT</a>&#160;&#160;&#160;0x01U</td></tr>
<tr class="separator:a032481fba4557e17310bf5a7d3a786db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c220ad05ac446dabda85e1b1917c854"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a3c220ad05ac446dabda85e1b1917c854">MN_FULL_THROTTLE</a>&#160;&#160;&#160;0x100U</td></tr>
<tr class="separator:a3c220ad05ac446dabda85e1b1917c854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e89ac3314e7a25e049df08d2de4b49a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a3e89ac3314e7a25e049df08d2de4b49a">MN_LOOKUP_TEMPERATURE_INCREMENT</a>&#160;&#160;&#160;0x01U</td></tr>
<tr class="separator:a3e89ac3314e7a25e049df08d2de4b49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaa95b4e58cd4639d9ac2b932bdad5e34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#aaa95b4e58cd4639d9ac2b932bdad5e34">mn_seconds_delay</a> (uint8_t num_of_seconds)</td></tr>
<tr class="separator:aaa95b4e58cd4639d9ac2b932bdad5e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1012d38e432a89093b605e9419ba526"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#ae1012d38e432a89093b605e9419ba526">mn_second_tick</a> ()</td></tr>
<tr class="separator:ae1012d38e432a89093b605e9419ba526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee2dfb2c8a92072f190431c7bd0e7d0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#aee2dfb2c8a92072f190431c7bd0e7d0a">mn_set_target_rpm</a> (uint16_t target_rpm)</td></tr>
<tr class="separator:aee2dfb2c8a92072f190431c7bd0e7d0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f6888ef364c4052cbe892df51a39693"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a6f6888ef364c4052cbe892df51a39693">mn_stop_cooler</a> ()</td></tr>
<tr class="separator:a6f6888ef364c4052cbe892df51a39693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65809cbce2d6d54feb40be3b843127c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a65809cbce2d6d54feb40be3b843127c0">mn_set_rpm_in_percents</a> (uint16_t target_rpm)</td></tr>
<tr class="separator:a65809cbce2d6d54feb40be3b843127c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55c438389c250e55e154ca7b8433d5c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#af55c438389c250e55e154ca7b8433d5c">mn_lookup_rpm</a> (uint16_t tmes)</td></tr>
<tr class="separator:af55c438389c250e55e154ca7b8433d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab7a46fa3c0d093be90698b8bdce49f91"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#ab7a46fa3c0d093be90698b8bdce49f91">mn_flags0</a></td></tr>
<tr class="separator:ab7a46fa3c0d093be90698b8bdce49f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f0af04325d379bf6b6d320d590d2831"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a0f0af04325d379bf6b6d320d590d2831">mn_seconds_delay_counter</a></td></tr>
<tr class="separator:a0f0af04325d379bf6b6d320d590d2831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8909d5019e20011cb30c586a8b49121"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#ac8909d5019e20011cb30c586a8b49121">mn_min_rpm</a></td></tr>
<tr class="separator:ac8909d5019e20011cb30c586a8b49121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543398b596a04bff13e31c67fda3c529"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a543398b596a04bff13e31c67fda3c529">mn_min_duty_cycle</a></td></tr>
<tr class="separator:a543398b596a04bff13e31c67fda3c529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6518139a433a8d328b612641e4fcacfc"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#a6518139a433a8d328b612641e4fcacfc">mn_max_rpm</a></td></tr>
<tr class="separator:a6518139a433a8d328b612641e4fcacfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9225b71dac88ec64f3243907aa15334"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8h.html#aa9225b71dac88ec64f3243907aa15334">mn_target_rpm</a></td></tr>
<tr class="separator:aa9225b71dac88ec64f3243907aa15334"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a032481fba4557e17310bf5a7d3a786db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a032481fba4557e17310bf5a7d3a786db">&#9670;&nbsp;</a></span>MN_BRPM_INCREMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_BRPM_INCREMENT&#160;&#160;&#160;0x01U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Actual base RMPs is value at EEPROM[MN_LOOKUP_BRPM_ADDRESS] + this value. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00137">137</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="aa6898ca87304508f7715049e8a4db7c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6898ca87304508f7715049e8a4db7c1">&#9670;&nbsp;</a></span>MN_COOLER_SPIN_UP_DUTY_CYCLE_STEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_COOLER_SPIN_UP_DUTY_CYCLE_STEP&#160;&#160;&#160;0x01U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When determining minimal duty cycle we starting from duty cycle = HAL_MIN_DUTY_CYCLE and then increasing it every <a class="el" href="hal_8c.html#a09985dd15e83bdf67de9b094fedfc3c4">hal_second_tick()</a> until cooler reach minimal RPM. This constant defines duty cycle increment if cooler not started yet. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00100">100</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a776ccf3d27a8983037d7397dc6b2e6ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a776ccf3d27a8983037d7397dc6b2e6ed">&#9670;&nbsp;</a></span>MN_COOLER_SPIN_UP_MINIMAL_RPM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_COOLER_SPIN_UP_MINIMAL_RPM&#160;&#160;&#160;0x04U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When powered on, we starting from minimal duty cycle and then increasing it until next tachometer measurement will me greater or equal to this constant. When it occurs firmware believe that cooler started and spinning stable. For 2 pulses per revolution cooler we have 1 = 30 RPM. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00107">107</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="ae4b448ea3fccf1c0972090aad4eec9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4b448ea3fccf1c0972090aad4eec9d6">&#9670;&nbsp;</a></span>MN_COOLER_SPIN_UP_WAIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_COOLER_SPIN_UP_WAIT&#160;&#160;&#160;0x05U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait this time (in seconds) before remembering RPM at spin-up stage </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00112">112</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a0493cec9fe22a39f1890436658273b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0493cec9fe22a39f1890436658273b9b">&#9670;&nbsp;</a></span>MN_F0_DISABLE_RPM_LOOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_F0_DISABLE_RPM_LOOP&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If this flag set to 1, then duty cycle adjustment will be disabled. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00094">94</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a3c220ad05ac446dabda85e1b1917c854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c220ad05ac446dabda85e1b1917c854">&#9670;&nbsp;</a></span>MN_FULL_THROTTLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_FULL_THROTTLE&#160;&#160;&#160;0x100U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Full throttle for cooler. Maximal value for <a class="el" href="main_8h.html#a65809cbce2d6d54feb40be3b843127c0">mn_set_rpm_in_percents()</a>. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00142">142</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="ac6fe5a3a19489ab50584d25600cb2649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6fe5a3a19489ab50584d25600cb2649">&#9670;&nbsp;</a></span>MN_LOOKUP_ABL_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_LOOKUP_ABL_ADDRESS&#160;&#160;&#160;0x00U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>EEPROM address of ABL (ADC base level). </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00122">122</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a060c81eea0c2703263be5a47c2b73def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060c81eea0c2703263be5a47c2b73def">&#9670;&nbsp;</a></span>MN_LOOKUP_BRPM_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_LOOKUP_BRPM_ADDRESS&#160;&#160;&#160;0x02U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>EEPROM address of base RPMs. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00127">127</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="adc70b15633e4e6144632c15a6b7164a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc70b15633e4e6144632c15a6b7164a0">&#9670;&nbsp;</a></span>MN_LOOKUP_FIRST_VALUE_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_LOOKUP_FIRST_VALUE_ADDRESS&#160;&#160;&#160;0x03U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>EEPROM address of the first temperature to RPM lookup value. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00132">132</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a3e89ac3314e7a25e049df08d2de4b49a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e89ac3314e7a25e049df08d2de4b49a">&#9670;&nbsp;</a></span>MN_LOOKUP_TEMPERATURE_INCREMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_LOOKUP_TEMPERATURE_INCREMENT&#160;&#160;&#160;0x01U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Actual temperature increment per step is value from EEPROM low halfbyte + this value. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00147">147</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a9f969a8879a8021d093ae5080e05706d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f969a8879a8021d093ae5080e05706d">&#9670;&nbsp;</a></span>MN_WAIT_BEFORE_RPM_LOOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_WAIT_BEFORE_RPM_LOOP&#160;&#160;&#160;0x03U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait this time (in seconds) when starting cooler before enabling RPM loop </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00117">117</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="abd8fdf4407be5b2163aa5e80ac6b52b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd8fdf4407be5b2163aa5e80ac6b52b3">&#9670;&nbsp;</a></span>MN_WAIT_FOR_COOLER_STOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MN_WAIT_FOR_COOLER_STOP&#160;&#160;&#160;0x01U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main header file EEPROM STRUCTURE</p>
<p>We have 128 bytes of EEPROM</p>
<p>First 2 bytes (word) - ADC base level (ABL) AKA base temperature, in ADC code. Temperature values are relative to this base value. MN_LOOKUP_ABL_ADDRESS points to EEPROM address of ABL.</p>
<p>Then - base RPMs, 1 byte, i.e. RPMs at base temperature. Obviously it can't be "off", so actual base RPMs is this value + MN_BRPM_INCREMENT. MN_LOOKUP_BRPM_ADDRESS points to it.</p>
<p>Then, temperature/RPM lookup table follows. Each lookup packed into 1 byte as follow: RRRRTTTT, where RRRR is 4-bit RPM delta, and TTTT is 4-bit temperature delta.</p>
<p>Temperature delta can't be 0, so actually we have TTTT+1, i.e. 0000 means 1.</p>
<p>MN_LOOKUP_FIRST_VALUE_ADDRESS points to EEPROM address of the first lookup value.</p>
<p>When looking up for RPM for given temperature the next algorithm is used: 1) Declare RPM and Temperature variables; 2) If temperature &lt; ABL, then RPM = 0 and exit; 3) RPM = Base RPM, Temperature = ABL (ADC base level); 4) EEPROM address points to the first lookup table byte; 5) If measured temperature &lt;= Temperature, then return RPM and exit; 6) Read lookup byte, parse it, RPM += RPM delta; Temperature += Temperature delta + MN_LOOKUP_TEMPERATURE_INCREMENT; 7) Increment EEPROM address; 8) Goto 5.</p>
<p>Temperature here is the ADC value, and RPM is the argument of <a class="el" href="main_8h.html#a65809cbce2d6d54feb40be3b843127c0">mn_set_rpm_in_percents()</a> function. When powered on controller will turn cooler off and then will wait until cooler stopped. If no tachometer pulses came during given (in seconds) interval, cooler treated as stopped. </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00089">89</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af55c438389c250e55e154ca7b8433d5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55c438389c250e55e154ca7b8433d5c">&#9670;&nbsp;</a></span>mn_lookup_rpm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t mn_lookup_rpm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>tmes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function used to convert ADC value to the desired RPM. For details see EEPROM STRUCTURE section. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmes</td><td>Measured temperature (ADC value). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00236">236</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="ae1012d38e432a89093b605e9419ba526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1012d38e432a89093b605e9419ba526">&#9670;&nbsp;</a></span>mn_second_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mn_second_tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets called every second (from <a class="el" href="hal_8c.html#a09985dd15e83bdf67de9b094fedfc3c4">hal_second_tick()</a>) </p>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00127">127</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="aaa95b4e58cd4639d9ac2b932bdad5e34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa95b4e58cd4639d9ac2b932bdad5e34">&#9670;&nbsp;</a></span>mn_seconds_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mn_seconds_delay </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_of_seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function waits given number of seconds. </p>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00141">141</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a65809cbce2d6d54feb40be3b843127c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65809cbce2d6d54feb40be3b843127c0">&#9670;&nbsp;</a></span>mn_set_rpm_in_percents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mn_set_rpm_in_percents </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>target_rpm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to set target RPM in percents. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_rpm</td><td>Target RPM in percents: 0x00 - cooler stopped; 0x01 - mn_min_rpm; 0x100 - mn_max_rpm. Values higher than 0x100 is not checked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00216">216</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="aee2dfb2c8a92072f190431c7bd0e7d0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee2dfb2c8a92072f190431c7bd0e7d0a">&#9670;&nbsp;</a></span>mn_set_target_rpm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mn_set_target_rpm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>target_rpm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to set target RPM for cooler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_rpm</td><td>For 2 tachometer pulses per revolution (i.e. common cooler) 1 = 30 RPM. If set to 0, then cooler will be stopped and RPM loop disabled. If not 0, then cooler will be started and RPM loop enabled. If set higher than mn_max_rpm - will be treated as mn_max_rpm. If set lower than mn_min_rpm but higher then 0 - will be treated as mn_min_rpm. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00159">159</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a6f6888ef364c4052cbe892df51a39693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f6888ef364c4052cbe892df51a39693">&#9670;&nbsp;</a></span>mn_stop_cooler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mn_stop_cooler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops cooler and disables RPMs feedback loop. </p>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00202">202</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab7a46fa3c0d093be90698b8bdce49f91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a46fa3c0d093be90698b8bdce49f91">&#9670;&nbsp;</a></span>mn_flags0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t mn_flags0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flags variable 0 </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00157">157</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a6518139a433a8d328b612641e4fcacfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6518139a433a8d328b612641e4fcacfc">&#9670;&nbsp;</a></span>mn_max_rpm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t mn_max_rpm</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximal RPM for given cooler </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00177">177</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a543398b596a04bff13e31c67fda3c529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a543398b596a04bff13e31c67fda3c529">&#9670;&nbsp;</a></span>mn_min_duty_cycle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t mn_min_duty_cycle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Duty cycle, for which mn_min_rpm reached </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00172">172</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="ac8909d5019e20011cb30c586a8b49121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8909d5019e20011cb30c586a8b49121">&#9670;&nbsp;</a></span>mn_min_rpm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t mn_min_rpm</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimal RPM for given cooler </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00167">167</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="a0f0af04325d379bf6b6d320d590d2831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f0af04325d379bf6b6d320d590d2831">&#9670;&nbsp;</a></span>mn_seconds_delay_counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t mn_seconds_delay_counter</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used as counter in in <a class="el" href="main_8h.html#aaa95b4e58cd4639d9ac2b932bdad5e34">mn_seconds_delay()</a>. Decreases every second, then stays at zero </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00162">162</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
<a id="aa9225b71dac88ec64f3243907aa15334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9225b71dac88ec64f3243907aa15334">&#9670;&nbsp;</a></span>mn_target_rpm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t mn_target_rpm</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If RPM control loop is enabled, then it will try to get this RPM. DO NOT SET IT MANUALLY, USE <a class="el" href="main_8h.html#aee2dfb2c8a92072f190431c7bd0e7d0a">mn_set_target_rpm()</a> INSTEAD! </p>

<p class="definition">Definition at line <a class="el" href="main_8h_source.html#l00183">183</a> of file <a class="el" href="main_8h_source.html">main.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8h.html">main.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
