<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Power Unit Cooler Controller: hal.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Power Unit Cooler Controller
   </div>
   <div id="projectbrief">Firmware for power unit cooler controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hal_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hal.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &lt;avr/wdt.h&gt;</code><br />
<code>#include &lt;avr/interrupt.h&gt;</code><br />
<code>#include &lt;util/delay_basic.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hal.h:</div>
<div class="dyncontent">
<div class="center"><img src="hal_8h__incl.png" border="0" usemap="#hal_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="hal_8h__dep__incl.png" border="0" usemap="#hal_8hdep" alt=""/></div>
<map name="hal_8hdep" id="hal_8hdep">
<area shape="rect" id="node2" href="main_8h.html" title="main.h" alt="" coords="40,80,101,107"/>
<area shape="rect" id="node3" href="hal_8c.html" title="hal.c" alt="" coords="5,155,56,181"/>
<area shape="rect" id="node4" href="main_8c.html" title="main.c" alt="" coords="80,155,141,181"/>
</map>
</div>
</div>
<p><a href="hal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a97ff1243aade6539ebb713d2ac40288d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a97ff1243aade6539ebb713d2ac40288d">hal_get_cooler_duty_cycle</a>()&#160;&#160;&#160;OCR0A</td></tr>
<tr class="separator:a97ff1243aade6539ebb713d2ac40288d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43bafb28b29491ec7f871319b5a3b2f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>&#160;&#160;&#160;8000000UL</td></tr>
<tr class="separator:a43bafb28b29491ec7f871319b5a3b2f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c45179e58df497f184d36dd0689d5cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a1c45179e58df497f184d36dd0689d5cc">HAL_PORTB_DIR</a>&#160;&#160;&#160;0b00000001</td></tr>
<tr class="separator:a1c45179e58df497f184d36dd0689d5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0177dd985d15d2c9214abd09889847e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a0177dd985d15d2c9214abd09889847e3">HAL_COOLER_PORT</a>&#160;&#160;&#160;PORTB</td></tr>
<tr class="separator:a0177dd985d15d2c9214abd09889847e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf111dcf0ba444bf06e4e190c65dc199"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#acf111dcf0ba444bf06e4e190c65dc199">HAL_COOLER_PIN</a>&#160;&#160;&#160;0x00 /* PB0 */</td></tr>
<tr class="separator:acf111dcf0ba444bf06e4e190c65dc199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af93ce7f83d494e7ecc5cddc20f7056a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#af93ce7f83d494e7ecc5cddc20f7056a5">HAL_WDT_INTERVAL</a>&#160;&#160;&#160;WDTO_2S</td></tr>
<tr class="separator:af93ce7f83d494e7ecc5cddc20f7056a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32f581801ce8b8d6049ad0d870bb254"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#ad32f581801ce8b8d6049ad0d870bb254">HAL_MIN_DUTY_CYCLE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:ad32f581801ce8b8d6049ad0d870bb254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af211195e32162d29d86e78324acf00e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#af211195e32162d29d86e78324acf00e4">HAL_MAX_DUTY_CYCLE</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:af211195e32162d29d86e78324acf00e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaef54e9ab2087cb7f66d0cefddc5c8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#adaef54e9ab2087cb7f66d0cefddc5c8e">HAL_TIMER1_OVERFLOWS_PER_SECOND</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:adaef54e9ab2087cb7f66d0cefddc5c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5475fc1ef1bad09d596d408a809d12ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a5475fc1ef1bad09d596d408a809d12ca">HAL_ADC_RESULT_SHIFT_BITS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a5475fc1ef1bad09d596d408a809d12ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82209d8dac3f2555cfc97d23a5c19c21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a82209d8dac3f2555cfc97d23a5c19c21">HAL_ADC_NUM_OF_MEASUREMENTS</a>&#160;&#160;&#160;(1 &lt;&lt; <a class="el" href="hal_8h.html#a5475fc1ef1bad09d596d408a809d12ca">HAL_ADC_RESULT_SHIFT_BITS</a>) - 1</td></tr>
<tr class="separator:a82209d8dac3f2555cfc97d23a5c19c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf159eed441562936ad4242276a0d450"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#abf159eed441562936ad4242276a0d450">HAL_F0_JUST_TICKED</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:abf159eed441562936ad4242276a0d450"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a67c27de15bc07a3c14bf05d56baa8802"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a67c27de15bc07a3c14bf05d56baa8802">hal_early_init</a> (void) __attribute__((naked)) __attribute__((section(&quot;.init3&quot;)))</td></tr>
<tr class="separator:a67c27de15bc07a3c14bf05d56baa8802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0bc78c8fe1e69b9f472299e24eb266e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#aa0bc78c8fe1e69b9f472299e24eb266e">hal_init</a> ()</td></tr>
<tr class="separator:aa0bc78c8fe1e69b9f472299e24eb266e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9da766c7ee6dc36908cbb1e420dad91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#aa9da766c7ee6dc36908cbb1e420dad91">hal_set_cooler_duty_cycle</a> (int16_t cycle)</td></tr>
<tr class="separator:aa9da766c7ee6dc36908cbb1e420dad91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09985dd15e83bdf67de9b094fedfc3c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a09985dd15e83bdf67de9b094fedfc3c4">hal_second_tick</a> ()</td></tr>
<tr class="separator:a09985dd15e83bdf67de9b094fedfc3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4af12cd4bf768991e6c9314386490d37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a4af12cd4bf768991e6c9314386490d37">hal_stop_cooler</a> ()</td></tr>
<tr class="separator:a4af12cd4bf768991e6c9314386490d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2b6bc12aa727f0c9e7aeb00b6ca968"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a2a2b6bc12aa727f0c9e7aeb00b6ca968">hal_start_cooler</a> ()</td></tr>
<tr class="separator:a2a2b6bc12aa727f0c9e7aeb00b6ca968"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3efc8a4de41fdc584fdbd72dc09e99a5"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a3efc8a4de41fdc584fdbd72dc09e99a5">hal_flags0</a></td></tr>
<tr class="separator:a3efc8a4de41fdc584fdbd72dc09e99a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a902c4f152a70db4380e5feb329882af5"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a902c4f152a70db4380e5feb329882af5">hal_timer1_overflows_number</a></td></tr>
<tr class="separator:a902c4f152a70db4380e5feb329882af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46bd2678b6760f1e13f2bedc80c0e1b4"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a46bd2678b6760f1e13f2bedc80c0e1b4">hal_tacho_counter</a></td></tr>
<tr class="separator:a46bd2678b6760f1e13f2bedc80c0e1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f8c2a26bfd65bd6c9585b05aac9106"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a66f8c2a26bfd65bd6c9585b05aac9106">hal_tacho</a></td></tr>
<tr class="separator:a66f8c2a26bfd65bd6c9585b05aac9106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a54125d80b441c34db1d0e87bd7b427"><td class="memItemLeft" align="right" valign="top">volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a2a54125d80b441c34db1d0e87bd7b427">hal_adc_accumulator</a></td></tr>
<tr class="separator:a2a54125d80b441c34db1d0e87bd7b427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5affcb06dd10ffb2defe52c4ad3ff5ce"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a5affcb06dd10ffb2defe52c4ad3ff5ce">hal_adc_avg_counter</a></td></tr>
<tr class="separator:a5affcb06dd10ffb2defe52c4ad3ff5ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2661fa7a92af5f4edd5f7b418ef32856"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal_8h.html#a2661fa7a92af5f4edd5f7b418ef32856">hal_temperature</a></td></tr>
<tr class="separator:a2661fa7a92af5f4edd5f7b418ef32856"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a43bafb28b29491ec7f871319b5a3b2f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43bafb28b29491ec7f871319b5a3b2f8">&#9670;&nbsp;</a></span>F_CPU</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_CPU&#160;&#160;&#160;8000000UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MCU Frequency </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00118">118</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a82209d8dac3f2555cfc97d23a5c19c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82209d8dac3f2555cfc97d23a5c19c21">&#9670;&nbsp;</a></span>HAL_ADC_NUM_OF_MEASUREMENTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_ADC_NUM_OF_MEASUREMENTS&#160;&#160;&#160;(1 &lt;&lt; <a class="el" href="hal_8h.html#a5475fc1ef1bad09d596d408a809d12ca">HAL_ADC_RESULT_SHIFT_BITS</a>) - 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How many ADC measurements will be averaged to get temperature MINUS ONE (to keep it within uint8_t) </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00164">164</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a5475fc1ef1bad09d596d408a809d12ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5475fc1ef1bad09d596d408a809d12ca">&#9670;&nbsp;</a></span>HAL_ADC_RESULT_SHIFT_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_ADC_RESULT_SHIFT_BITS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of bits, to what hal_adc_accumulator need to be shifted left to get hal_temperature. </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00159">159</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="acf111dcf0ba444bf06e4e190c65dc199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf111dcf0ba444bf06e4e190c65dc199">&#9670;&nbsp;</a></span>HAL_COOLER_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_COOLER_PIN&#160;&#160;&#160;0x00 /* PB0 */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cooler connected here </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00134">134</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a0177dd985d15d2c9214abd09889847e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0177dd985d15d2c9214abd09889847e3">&#9670;&nbsp;</a></span>HAL_COOLER_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_COOLER_PORT&#160;&#160;&#160;PORTB</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Port, where cooler connected </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00129">129</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="abf159eed441562936ad4242276a0d450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf159eed441562936ad4242276a0d450">&#9670;&nbsp;</a></span>HAL_F0_JUST_TICKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_F0_JUST_TICKED&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Raised on exit from <a class="el" href="hal_8h.html#a09985dd15e83bdf67de9b094fedfc3c4">hal_second_tick()</a> function. Can be used to know that new tachometer measurement completed </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00171">171</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a97ff1243aade6539ebb713d2ac40288d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ff1243aade6539ebb713d2ac40288d">&#9670;&nbsp;</a></span>hal_get_cooler_duty_cycle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hal_get_cooler_duty_cycle</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;OCR0A</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hardware: </p><pre class="fragment">                        ATTINY25
                      +----__----+
</pre><p> RESET (PB5) -&gt;&mdash;| 1 8 |&ndash;&mdash; VCC NOT CONNECTED -&gt;&mdash;| 2 7 |&mdash;&lt;- TACHO (INT0/PB2) TSENS (ADC2/PB4) -&gt;&mdash;| 3 6 |&mdash;&lt;- NOT CONNECTED GND &ndash;&mdash;| 4 5 |&mdash;&gt;- PWM (PB0/OC0A) +----&mdash;&mdash;+</p>
<p>Directions: PIN DIR DDRB</p>
<p>PB0 OUT 1 PB1 IN 0 PB2 IN 0 PB3 IN 0 PB4 IN 0 PB5 IN 0</p>
<p>We can use two kinds on thermal sensors:</p>
<p>1) LM35 in direct mode, i.e. 10mV/°C. Uout=0.01*t°. Uncomment USE_LM35_SENSOR if you are using it. ADC will use 1.1V reference, 10-bit mode, so ADC = 9.(309)*t°.</p>
<p>t °C U V ADC 0 0 0 100 1 233</p>
<p>233 steps per 100°C</p>
<p>2) LM335 with 2/3 divider, i.e. 6.(6)mV/°K. Uout=2*(t°+273.15)/300. ADC will use 2.56V reference, 10-bit moide. ADC=2.(6)*t°+728.4</p>
<p>t °C U V ADC 0 1.821 728 100 2.487 995</p>
<p>267 steps per 100°C</p>
<p>t° is temperature in Celsius. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!! UNCOMMENT IT IF LM35 SENSOR USED !!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! #define USE_LM35_SENSOR </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00108">108</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="af211195e32162d29d86e78324acf00e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af211195e32162d29d86e78324acf00e4">&#9670;&nbsp;</a></span>HAL_MAX_DUTY_CYCLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_MAX_DUTY_CYCLE&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximal possible duty cycle </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00149">149</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="ad32f581801ce8b8d6049ad0d870bb254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32f581801ce8b8d6049ad0d870bb254">&#9670;&nbsp;</a></span>HAL_MIN_DUTY_CYCLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_MIN_DUTY_CYCLE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimal possible duty cycle (set cycle to it to stop cooler). </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00144">144</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a1c45179e58df497f184d36dd0689d5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c45179e58df497f184d36dd0689d5cc">&#9670;&nbsp;</a></span>HAL_PORTB_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_PORTB_DIR&#160;&#160;&#160;0b00000001</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!PORTS DIRECTIONS - WRONG SETTINGS WILL DAMAGE HARDWARE!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00124">124</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="adaef54e9ab2087cb7f66d0cefddc5c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaef54e9ab2087cb7f66d0cefddc5c8e">&#9670;&nbsp;</a></span>HAL_TIMER1_OVERFLOWS_PER_SECOND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_TIMER1_OVERFLOWS_PER_SECOND&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00154">154</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="af93ce7f83d494e7ecc5cddc20f7056a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af93ce7f83d494e7ecc5cddc20f7056a5">&#9670;&nbsp;</a></span>HAL_WDT_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_WDT_INTERVAL&#160;&#160;&#160;WDTO_2S</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Watchdog timeout interval </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00139">139</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a67c27de15bc07a3c14bf05d56baa8802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c27de15bc07a3c14bf05d56baa8802">&#9670;&nbsp;</a></span>hal_early_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_early_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Very early initialization stage. Here we have to disable interrupts ad set-up watchdog to avoid reset during initialization. </p>

<p class="definition">Definition at line <a class="el" href="hal_8c_source.html#l00048">48</a> of file <a class="el" href="hal_8c_source.html">hal.c</a>.</p>

</div>
</div>
<a id="aa0bc78c8fe1e69b9f472299e24eb266e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0bc78c8fe1e69b9f472299e24eb266e">&#9670;&nbsp;</a></span>hal_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hardware initialization function. Call it before any other functions. </p>

<p class="definition">Definition at line <a class="el" href="hal_8c_source.html#l00128">128</a> of file <a class="el" href="hal_8c_source.html">hal.c</a>.</p>

</div>
</div>
<a id="a09985dd15e83bdf67de9b094fedfc3c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09985dd15e83bdf67de9b094fedfc3c4">&#9670;&nbsp;</a></span>hal_second_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_second_tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets called every second </p>

<p class="definition">Definition at line <a class="el" href="hal_8c_source.html#l00104">104</a> of file <a class="el" href="hal_8c_source.html">hal.c</a>.</p>

</div>
</div>
<a id="aa9da766c7ee6dc36908cbb1e420dad91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9da766c7ee6dc36908cbb1e420dad91">&#9670;&nbsp;</a></span>hal_set_cooler_duty_cycle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_set_cooler_duty_cycle </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>cycle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set PWM duty cycle. If cycle &gt; HAL_MAX_DUTY_CYCLE then set to HAL_MAX_DUTY_CYCLE. If cycle &lt; HAL_MIN_DUTY_CYCLE then set it to HAL_MIN_DUTY_CYCLE.</p>
<p>Setting duty cycle to HAL_MIN_DUTY_CYCLE will lead to cooler stop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cycle</td><td>Duty cycle from HAL_MIN_DUTY_CYCLE to HAL_MIN_DUTY_CYCLE </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hal_8c_source.html#l00203">203</a> of file <a class="el" href="hal_8c_source.html">hal.c</a>.</p>

</div>
</div>
<a id="a2a2b6bc12aa727f0c9e7aeb00b6ca968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a2b6bc12aa727f0c9e7aeb00b6ca968">&#9670;&nbsp;</a></span>hal_start_cooler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_start_cooler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to start cooler (PWM will be enabled, using last set PWM duty cycle). </p>

<p class="definition">Definition at line <a class="el" href="hal_8c_source.html#l00241">241</a> of file <a class="el" href="hal_8c_source.html">hal.c</a>.</p>

</div>
</div>
<a id="a4af12cd4bf768991e6c9314386490d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4af12cd4bf768991e6c9314386490d37">&#9670;&nbsp;</a></span>hal_stop_cooler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_stop_cooler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to stop cooler (PWM will be disabled, PWM output (PB0) will be held in 0). </p>

<p class="definition">Definition at line <a class="el" href="hal_8c_source.html#l00231">231</a> of file <a class="el" href="hal_8c_source.html">hal.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2a54125d80b441c34db1d0e87bd7b427"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a54125d80b441c34db1d0e87bd7b427">&#9670;&nbsp;</a></span>hal_adc_accumulator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint32_t hal_adc_accumulator</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ADC measurements accumulating here before being averaged and placed into hal_temperature. </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00205">205</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a5affcb06dd10ffb2defe52c4ad3ff5ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5affcb06dd10ffb2defe52c4ad3ff5ce">&#9670;&nbsp;</a></span>hal_adc_avg_counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t hal_adc_avg_counter</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Counter to count ADC measurements. </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00210">210</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a3efc8a4de41fdc584fdbd72dc09e99a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efc8a4de41fdc584fdbd72dc09e99a5">&#9670;&nbsp;</a></span>hal_flags0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t hal_flags0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Variable for different flags, related to HAL. By default all flags are cleared (zeros). </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00184">184</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a66f8c2a26bfd65bd6c9585b05aac9106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f8c2a26bfd65bd6c9585b05aac9106">&#9670;&nbsp;</a></span>hal_tacho</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t hal_tacho</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of tachometer pulses per second </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00200">200</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a46bd2678b6760f1e13f2bedc80c0e1b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46bd2678b6760f1e13f2bedc80c0e1b4">&#9670;&nbsp;</a></span>hal_tacho_counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t hal_tacho_counter</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Increases with every pulse from tachometer (i.e. INT0), gets copied to hal_tacho when <a class="el" href="hal_8h.html#a09985dd15e83bdf67de9b094fedfc3c4">hal_second_tick()</a> called and set to 0. For most coolers 2 pulses from tachometer = 1 revolution, but as I heard some coolers with 8 pulses per revolution exists. With uint16_t, 8 pulses per revolution and 1 second interval maximal allowed RPM will be 65535 * 60 / 8 = 491512.5 </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00196">196</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a2661fa7a92af5f4edd5f7b418ef32856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2661fa7a92af5f4edd5f7b418ef32856">&#9670;&nbsp;</a></span>hal_temperature</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t hal_temperature</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Averaged ADC measurement, i.e. temperature. </p>

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00216">216</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
<a id="a902c4f152a70db4380e5feb329882af5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a902c4f152a70db4380e5feb329882af5">&#9670;&nbsp;</a></span>hal_timer1_overflows_number</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t hal_timer1_overflows_number</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal_8h_source.html#l00189">189</a> of file <a class="el" href="hal_8h_source.html">hal.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="hal_8h.html">hal.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
